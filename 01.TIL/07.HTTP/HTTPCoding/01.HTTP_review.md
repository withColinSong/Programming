# [ëª©ì°¨](#ëª©ì°¨)
- [ëª©ì°¨](#ëª©ì°¨)
    - [try-with-resources](#try-with-resources)
- [1. Client / Server](#1-client--server)
- [2. ìš”ì²­ê³¼ ì‘ë‹µí•˜ê¸°](#2-ìš”ì²­ê³¼-ì‘ë‹µí•˜ê¸°)
  - [References](#references)

```
ë¸Œë¼ìš°ì € ìš”ì²­ê³¼ ì‘ë‹µí•˜ëŠ” ì½”ë“œë¥¼ try-with-resourceë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ,
try catch ë¬¸ìœ¼ë¡œ ë³µìŠµ ì°¨ì›ìœ¼ë¡œ ë‹¤ì‹œ ì‘ì„±í•´ë´¤ë‹¤.

try-with-resourcesë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©í•œ IOë“¤ì„ ì•Œì•„ì„œ ë‹«ì•„ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

ì‚¬ìš©í•  ë• ëª°ëì§€ë§Œ t-w-rì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ ìì›ì„ ì–´ë””ì„œ ë‹«ì•„ì•¼ í•˜ëŠ”ì§€ 
ë¬´ì§€í–ˆê¸°ì— ì´ë²ˆ ë³µìŠµ ê¸°íšŒì— ë°°ì›€ì„ ì–»ì—ˆë‹¤.ğŸ˜Š
```

### try-with-resources
```java
  try ( // ì„ ì–¸) {
      // ì½”ë“œ ì‘ì„±
  }  catch() {
  }
```

# 1. Client / Server

![](https://images.velog.io/images/withcolinsong/post/57b781a8-269c-48d7-9c44-06051de20114/image.png)

![](https://images.velog.io/images/withcolinsong/post/cd8982eb-13c7-4f51-acd4-c659ec7a48fa/image.png)

# 2. ìš”ì²­ê³¼ ì‘ë‹µí•˜ê¸°

```java
import java.io.*;
import java.net.ServerSocket;
import java.net.Socket;
import java.nio.charset.StandardCharsets;

public class HTTP {
    public static void main(String[] args) {
        String html = "<!DOCTYPE html>\n" +
                "<html>\n" +
                "    <head>\n" +
                "        <title>Hello HTTP Server!</title>\n" +
                "    </head>\n" +
                "    <body>\n" +
                "        <h1>HEADER</h1>\n" +
                "        <p>Contents</p>\n" +
                "    </body>\n" +
                "</html>";
        try {
            ServerSocket serverSocket = new ServerSocket(12345);
            System.out.println("í´ë¼ì´ì–¸íŠ¸ ëŒ€ê¸° ì¤‘");
            Socket socket = serverSocket.accept();
            System.out.println("í´ë¼ì´ì–¸íŠ¸ ì ‘ì†");

            // í´ë¼ì´ì–¸íŠ¸ê°€ ì…ë ¥ Stream ì–»ê¸°
            InputStream in = socket.getInputStream();
            // ì…ë ¥ Streamì„ ì½ì„ê±°ì•¼
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
			
            // ì½˜ì†”ì°½ì— í´ë¼ì´ì–¸íŠ¸ì— ìš”ì²­ Lineì„ ì¶œë ¥í• ê±°ì•¼
            String line;
            while(!(line = br.readLine()).equals("")) {
                System.out.println(line); 
            }

            // ì„œë²„ ì…ë ¥ Stream ì–»ê¸°
            OutputStream out = socket.getOutputStream();

            // ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•˜ê¸°
            String statusLine = "HTTP/1.1 200 OK \r\n";
            out.write(convertStringToBytes(statusLine));

            String contentType = "Content-Type : text/html; charset=utf-8;";
            out.write(convertStringToBytes(contentType+"\r\n"));

            String contentLength = "Content-Length :" + html.length();
            out.write(convertStringToBytes(contentLength+"\r\n"));

            // í—¤ë”ì™€ ë°”ë””ì˜ êµ¬ë¶„ ê°œí–‰
            out.write(convertStringToBytes("\r\n"));

            // ë°”ë”” (í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ì—¬ì¤„ ë‚´ìš©)
            out.write(convertStringToBytes(html));
            out.flush();
            
            //ì‚¬ìš©í•œ ìì›ì€ ë‹«ì•„ì£¼ê¸°
            socket.close();
            serverSocket.close();
            in.close();
            out.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static byte[] convertStringToBytes(String st) {
        return st.getBytes(StandardCharsets.UTF_8);
    }
}
```

## References
- ğŸˆ2020.11.27
- ğŸˆì •ë¦¬ : song, ipad

![](https://images.velog.io/images/withcolinsong/post/8dc5159f-5174-49f0-8cca-748d6cd38345/image.png)